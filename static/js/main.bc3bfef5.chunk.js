(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n,r,c,o=a(0),u=a.n(o),s=a(19),l=a.n(s),i=a(5),m=a(44),p=a(11),h=a(2),b=a(4),f=a(47),d=a(9),v=Object(h.b)("contacnts/add"),g=Object(h.b)("contacts/romove"),O=Object(h.b)("contacts/filter"),j=Object(h.b)("contacts/toggle"),E=Object(h.b)("contacts/loader"),k=Object(h.b)("contacts/error"),y=Object(h.b)("contacts/getContacts"),N=Object(h.c)([],(n={},Object(b.a)(n,v,(function(e,t){return[].concat(Object(f.a)(e),[t.payload])})),Object(b.a)(n,g,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),Object(b.a)(n,y,(function(e,t){return t.payload})),n)),S=Object(h.c)("",Object(b.a)({},O,(function(e,t){return t.payload}))),C=Object(h.c)(!1,Object(b.a)({},j,(function(e,t){return t.payload}))),w=Object(h.c)(!1,Object(b.a)({},E,(function(e,t){return t.payload}))),x=Object(h.c)(!1,Object(b.a)({},k,(function(e,t){return t.payload}))),L=Object(d.c)({items:N,filter:S,hasNameInContacts:C,loader:w,error:x}),A=a(16),I=Object(h.b)("auth/loaderToggle"),F=Object(h.b)("auth/error"),U=Object(h.b)("auth/registerSuccess"),B=Object(h.b)("auth/logoutSuccess"),D={authLoader:I,registerSuccess:U,authError:F,loginSuccess:Object(h.b)("auth/loginSuccess"),logoutSuccess:B,currentUserSuccess:Object(h.b)("auth/currentUserSuccess")},z={name:"",email:""},P=Object(h.c)(z,(r={},Object(b.a)(r,D.registerSuccess,(function(e,t){return t.payload.user})),Object(b.a)(r,D.loginSuccess,(function(e,t){return t.payload.user})),Object(b.a)(r,D.logoutSuccess,(function(e,t){t.payload;return Object(A.a)({},z)})),Object(b.a)(r,D.currentUserSuccess,(function(e,t){return t.payload})),r)),T=Object(h.c)(null,(c={},Object(b.a)(c,D.registerSuccess,(function(e,t){return t.payload.token})),Object(b.a)(c,D.loginSuccess,(function(e,t){return t.payload.token})),Object(b.a)(c,D.logoutSuccess,(function(e,t){t.payload;return null})),c)),V=Object(h.c)(!1,Object(b.a)({},D.authLoader,(function(e,t){return t.payload}))),J=Object(h.c)(null,Object(b.a)({},D.authError,(function(e,t){return t.payload}))),R=Object(d.c)({user:P,token:T,loader:V,error:J}),X=a(32),Y=a(45),q={key:"token",storage:a.n(Y).a,whitelist:["token"]},G=Object(h.a)({reducer:{contacts:L,auth:Object(X.a)(q,R)}}),H=Object(X.b)(G),K=(a(61),a(6)),M=a(20),Q=a(21),W=a(23),Z=a(22),$=a(108),_=a(10),ee=a.n(_),te=a(18),ae=a(17),ne=a.n(ae);ne.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var re=a(13),ce=function(e){return e.contacts},oe=function(e){return ce(e).items},ue=function(e){return ce(e).filter},se=Object(re.a)([oe,ue],(function(e,t){return t?e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):e})),le=function(e){return ce(e).error},ie=function(e){return ce(e).hasNameInContacts},me=function(e){return ce(e).loader},pe=function(e){return e.auth},he=function(e){return function(e){return pe(e).user}(e).email},be=function(e){return pe(e).token},fe=function(e){return pe(e).loader},de=(a(80),function(e){Object(W.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(M.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",number:""},e.changeValue=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(b.a)({},r,n))},e.hasContact=function(t){return e.props.contacts.some((function(e){return e.name===t}))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n={name:a.name,number:a.number};e.hasContact(n.name)?e.props.toggle(!0):(e.props.addContact(n),e.props.toggle(!1),e.setState({name:"",number:""}))},e}return Object(Q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.number;return u.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},u.a.createElement("input",{className:"form-item",type:"text",value:t,name:"name",placeholder:"Your name",onChange:this.changeValue}),u.a.createElement("input",{className:"form-item",type:"phone",placeholder:"333-333-333",value:a,name:"number",onChange:this.changeValue}),u.a.createElement("button",{className:"form-btn"}," Add contact "))}}]),a}(o.Component)),ve={addContact:function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(a,n){var r,c,o;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n(),c=r.auth.token,t.prev=1,a(E(!0)),t.next=5,ne()({url:"contacts",method:"post",data:e,headers:{Authorization:"Bearer ".concat(c)}});case 5:o=t.sent,console.log(o),a(v(o.data)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),k(t.t0);case 13:return t.prev=13,a(E(!1)),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})));return function(e,a){return t.apply(this,arguments)}}()},toggle:j},ge=Object(i.b)((function(e){return{contacts:oe(e),hasNameInContacts:ie(e),token:be(e)}}),ve)(de),Oe=a(109),je=a(46),Ee=a.n(je),ke=function(){return u.a.createElement(Ee.a,{className:"loader",type:"ThreeDots",color:"#FFFF00",height:100,width:100,timeout:3e3})},ye=(a(100),{deleteContact:function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(a,n){var r,c;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n(),c=r.auth.token,t.prev=1,a(E(!0)),t.next=5,ne()({url:"contacts/".concat(e),method:"delete",headers:{Authorization:"Bearer ".concat(c)}});case 5:a(g(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),k(t.t0);case 11:return t.prev=11,a(E(!1)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e,a){return t.apply(this,arguments)}}()},getContacts:function(){return function(){var e=Object(te.a)(ee.a.mark((function e(t,a){var n,r,c;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),n=a(),r=n.auth.token,e.prev=2,t(E(!0)),e.next=6,ne()({url:"contacts",method:"get",headers:{Authorization:"Bearer ".concat(r)}});case 6:c=e.sent,console.log(c.data),t(y(c.data)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),k(e.t0);case 14:return e.prev=14,t(E(!1)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t,a){return e.apply(this,arguments)}}()}}),Ne=Object(i.b)((function(e){return{contacts:se(e),loader:me(e)}}),ye)((function(e){var t=e.contacts,a=e.deleteContact,n=e.getContacts,r=e.loader;return Object(o.useEffect)((function(){n()}),[]),u.a.createElement("div",{className:"contacts-wrapper"},r&&u.a.createElement(ke,null),!r&&u.a.createElement(Oe.a,{component:"ul",className:"list"},t.map((function(e){var t=e.name,n=e.number,r=e.id;return u.a.createElement($.a,{key:r,classNames:"change",timeout:250},u.a.createElement("li",{className:"item"},u.a.createElement("p",{className:"list-name"}," ",t," "),u.a.createElement("p",{className:"list-phone"}," ",n," "),u.a.createElement("button",{onClick:function(){return a(r)},className:"list-btn"},"X")))}))))})),Se=(a(101),function(e){Object(W.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(M.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isLoade:!1},e.changeFilter=function(t){e.props.filterItems(t.target.value)},e}return Object(Q.a)(a,[{key:"render",value:function(){var e=this.state.isLoade,t=this.props,a=t.contacts,n=t.hasNameInContacts,r=t.toggle,c=t.search,o=t.error,s=t.loader;return u.a.createElement("div",{className:"phonebook-container"},!s&&!o&&u.a.createElement(u.a.Fragment,null,u.a.createElement($.a,{classNames:"phonebook",timeout:1500,in:e,mountOnEnter:!0},u.a.createElement("div",null,u.a.createElement("h1",null," Phonebook "))),u.a.createElement($.a,{in:n,classNames:"alert",unmountOnExit:!0,timeout:2500,onEntered:function(){return r(!1)}},u.a.createElement("div",{className:"alert-wrapper"},u.a.createElement("h1",{className:"alert-title"},"This name is have already in contacts list")))),u.a.createElement(ge,null),u.a.createElement($.a,{in:a.length>1,unmountOnExit:!0,classNames:"search",timeout:250},u.a.createElement("label",{className:"form-label"},u.a.createElement("p",null," Find contacts by name: "),u.a.createElement("input",{type:"text",name:"search",value:c,onChange:this.changeFilter}))),u.a.createElement(Ne,null))}}]),a}(o.Component)),Ce={addContact:v,toggle:j,filterItems:O},we=Object(i.b)((function(e){return{contacts:oe(e),hasNameInContacts:ie(e),search:ue(e),loader:me(e),error:le(e)}}),Ce)(Se);ne.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";a(102);var xe={name:"",email:"",password:""},Le=function(e){Object(W.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(M.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Object(A.a)({},xe),e.changeState=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(b.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault(),console.log(Object(A.a)({},e.state)),e.props.register(Object(A.a)({},e.state)),e.setState(Object(A.a)({},xe))},e}return Object(Q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.password;return u.a.createElement("div",{className:"reg-container"},u.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},u.a.createElement("p",null," Name: ")," "," ",u.a.createElement("input",{className:"form-item",type:"text",name:"name",value:t,onChange:this.changeState})," "," ",u.a.createElement("p",null," Email: ")," "," ",u.a.createElement("input",{className:"form-item",type:"email",name:"email",value:a,onChange:this.changeState})," "," ",u.a.createElement("p",null," Password: ")," "," ",u.a.createElement("input",{className:"form-item",type:"password",name:"password",value:n,onChange:this.changeState})," "," ",u.a.createElement("button",{className:"form-btn"}," Signup ")," "," ",u.a.createElement("p",null,"Do you have an account ? So you can ",u.a.createElement(p.b,{to:"login"}," login ")," "," ")," ")," ")}}]),a}(o.Component),Ae=Object(i.b)(null,{register:function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(a){var n;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(D.authLoader(!0)),t.next=4,ne.a.post("users/signup",e);case 4:n=t.sent,a(D.registerSuccess(n.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(D.authError(t.t0));case 11:return t.prev=11,a(D.authLoader(!1)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}})(Le),Ie=(a(104),{email:"",password:""}),Fe=function(e){Object(W.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(M.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Object(A.a)({},Ie),e.changeState=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(b.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault(),e.props.login(Object(A.a)({},e.state)),e.setState(Object(A.a)({},Ie))},e}return Object(Q.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return u.a.createElement("div",{className:"reg-container"},u.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},u.a.createElement("p",null," Email: "),u.a.createElement("input",{className:"form-item",type:"email",name:"email",value:t,onChange:this.changeState}),u.a.createElement("p",null," Password: "),u.a.createElement("input",{className:"form-item",type:"password",name:"password",value:a,onChange:this.changeState}),u.a.createElement("button",{className:"form-btn"}," Login "),u.a.createElement("p",null,"Do not you have any an account ? Please",u.a.createElement(p.b,{to:"/register"}," Signup ")," .")))}}]),a}(o.Component),Ue=Object(i.b)(null,{login:function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(a){var n;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(D.authLoader(!0)),t.next=4,ne.a.post("users/login",e);case 4:n=t.sent,console.log(n.data.token),a(D.loginSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a(D.authError(t.t0));case 12:return t.prev=12,a(D.authLoader(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})));return function(e){return t.apply(this,arguments)}}()}})(Fe),Be=(a(105),Object(i.b)((function(e){return{userEmail:he(e),token:be(e)}}),{logout:function(){return function(){var e=Object(te.a)(ee.a.mark((function e(t,a){var n,r;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(),r=n.auth.token,e.prev=1,t(D.authLoader(!0)),e.next=5,ne()({url:"users/logout",method:"post",headers:{Authorization:"Bearer ".concat(r)}});case 5:e.sent,t(D.logoutSuccess()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(D.authError(e.t0));case 12:return e.prev=12,t(D.authLoader(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t,a){return e.apply(this,arguments)}}()}})((function(e){var t=e.userEmail,a=e.logout,n=e.token;return u.a.createElement("div",{className:"user-wrapper"},u.a.createElement("p",{className:"user-email"}," Email: ",t," "),u.a.createElement("button",{className:"user-btn",onClick:function(){return a(n)}},"Logout"))}))),De=function(){return u.a.createElement("ul",{className:"nav-list"},u.a.createElement("li",{className:"nav-item"},u.a.createElement(p.b,{to:"/register",className:"nav-link",activeClassName:"nav-link-active"},"Signup")),u.a.createElement("li",{className:"nav-item"},u.a.createElement(p.b,{to:"login",className:"nav-link",activeClassName:"nav-link-active"},"Login")))},ze=(a(106),Object(i.b)((function(e){return{token:be(e),loader:fe(e)}}))((function(e){var t=e.token,a=e.loader;return u.a.createElement("header",{className:"header"},t&&u.a.createElement("nav",null,u.a.createElement("ul",{className:"nav-list"},u.a.createElement("li",{className:"nav-item"},u.a.createElement(p.b,{to:"/contacts",className:"nav-link",activeClassName:"nav-link-active"},"Contacts")))),t&&!a?u.a.createElement(Be,null):!a&&u.a.createElement(De,null))}))),Pe=a(27),Te=Object(i.b)((function(e){return{IsAuth:be(e)}}))((function(e){var t=e.IsAuth,a=e.Component,n=Object(Pe.a)(e,["IsAuth","Component"]);return u.a.createElement(K.b,Object.assign({},n,{render:function(e){return t?u.a.createElement(a,e):u.a.createElement(K.a,{to:"/login"})}}))})),Ve=Object(i.b)((function(e){return{IsAuth:be(e)}}))((function(e){var t=e.IsAuth,a=e.Component,n=e.destricted,r=Object(Pe.a)(e,["IsAuth","Component","destricted"]);return u.a.createElement(K.b,Object.assign({},r,{render:function(e){return t&&n?u.a.createElement(K.a,{to:"/contacts"}):u.a.createElement(a,e)}}))})),Je=Object(i.b)((function(e){return{token:be(e)}}),{getCurrentUser:function(e){return function(){var t=Object(te.a)(ee.a.mark((function t(a,n){var r,c,o;return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e),r=n(),c=r.auth.token){t.next=4;break}return t.abrupt("return");case 4:return console.log(c),t.prev=5,a(D.authLoader(!0)),t.next=9,ne()({url:"users/current",method:"get",headers:{Authorization:"Bearer ".concat(c)}});case 9:o=t.sent,console.log(o),a(D.currentUserSuccess(o.data)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),a(D.authError(t.t0));case 17:return t.prev=17,a(D.authLoader(!1)),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[5,14,17,20]])})));return function(e,a){return t.apply(this,arguments)}}()}})((function(e){var t=e.token,a=e.getCurrentUser;Object(K.g)();return Object(o.useEffect)((function(){a(t)}),[]),u.a.createElement(u.a.Fragment,null,u.a.createElement(ze,null),u.a.createElement(K.d,null,u.a.createElement(Te,{path:"/contacts",Component:we}),u.a.createElement(Ve,{path:"/register",destricted:!0,Component:Ae}),u.a.createElement(Ve,{path:"/login",destricted:!0,Component:Ue})))}));l.a.render(u.a.createElement(i.a,{store:G},u.a.createElement(m.a,{loading:null,persistor:H},u.a.createElement(p.a,null,u.a.createElement(Je,null)))),document.getElementById("root"))},50:function(e,t,a){e.exports=a(107)},61:function(e,t,a){},80:function(e,t,a){}},[[50,1,2]]]);
//# sourceMappingURL=main.bc3bfef5.chunk.js.map